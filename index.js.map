{"version":3,"file":"index.js","sources":["src/index.js"],"sourcesContent":["import '../styles/init.scss'; // Import any styles as this includes them in the build.\n\nfunction parseHeightString(heightString) {\n    // Regular expression to match patterns for feet and inches\n    const inchesRegex = /('|\\s)(\\d\")/gm;\n    const feetRegex = /^(\\d|\\d\\s|\\d\")/gm;\n\n    // Execute the regular expressions on the input height string\n    const inchesMatch = heightString.match(inchesRegex);\n    const feetMatch = heightString.match(feetRegex);\n\n    const feet = feetMatch[0];\n    const inches = inchesMatch[0].replace(/[\"\\s]/g, '');\n    // Return the height as a string in the format \"<feet>.<inches>\"\n    return feet + '.' + inches;\n}\n\nconst longJumpTextTemplate = `\n<div class=\"geoidesic-5e-jump-calc\">\n    <h2>{{5eJumpCalc.longJumpTitle}}</h2>\n    <p>PHB p182</p>\n    <p><strong>Running jump</strong> ({{5eJumpCalc.10FtFirst}}): <span class=\"lozenge\">{{running_jump}}</span></p>\n    <p><strong>Standing jump</strong>: <span class=\"lozenge\">{{standing_jump}}</span></p>\n    {{5eJumpCalc.longJumpPost}}\n</div>\n`;\nconst highJumpPost = `\n<p>{{5eJumpCalc.highJumpPost}}</p>\n`;\nconst longJumpPost = `\n<p>{{5eJumpCalc.longJumpPost}}</p>\n`;\nconst highJumpTextTemplate = `\n<div class=\"geoidesic-5e-jump-calc\">\n    <h2>High Jump</h2>\n    <p>PHB p182</p>\n    <p><strong>Running jump</strong> ({{5eJumpCalc.10FtFirst}}): <span class=\"lozenge\">{{running_jump}}</span></p>\n    <p><strong>Standing jump</strong>: <span class=\"lozenge\">{{standing_jump}}</span></p>\n    <p><strong>Reach</strong>: <span class=\"lozenge\">+{{reach}}</span></p>\n    {{5eJumpCalc.highJumpPost}}\n</div>\n`;\n\nfunction convertDecimalToFeet(decimalFeet) {\n    // Split the decimal feet into integer and fractional parts\n    const integerFeet = Math.floor(decimalFeet);\n    const fractionalFeet = decimalFeet - integerFeet;\n    // Convert the fractional part to inches (1 foot = 12 inches)\n    const inches = Math.round(fractionalFeet * 12);\n    // Return the result as a string in the format \"feet' inches\"\"\n    return `${integerFeet}' ${inches}\"`;\n}\n\nfunction convertFeetAndInchesToDecimal(feet, inches) {\n    // Convert feet to inches and add to inches value\n    const totalInches = feet * 12 + inches;\n    // Convert total inches to decimal feet\n    const decimalFeet = totalInches / 12;\n    return decimalFeet.toFixed(1); // Return as a string with one decimal place\n}\n\nfunction calculateLongJump(strength, type='standing') {\n    const distance = (type == 'running' ? strength : strength / 2).toString();\n    return convertDecimalToFeet(distance);\n}\nfunction calculateHighJump(strMod, type='standing') {\n    // 3 + your Strength modifier\n    const distance = (type == 'running' ? 3 + Number(strMod) : (3 + Number(strMod)) / 2).toString();\n    return convertDecimalToFeet(distance);\n    \n}\nfunction calculateReach(height) {\n    // split height string by '.' character\n    const split = height.split('.');\n    const feet = Number(split[0]);\n    const inches = Number(split[1]);\n    const halfInches = inches / 2;\n    const halfFeet = feet / 2;\n    const reachFeet = feet + halfFeet;\n    const reachInches = inches + halfInches;\n    if(reachInches > 12) {\n        reachFeet += 1;\n        reachInches -= 12;\n    }\n    const distance = String(reachFeet) + '.' + String(reachInches);\n    return convertDecimalToFeet(distance);\n}\n\n\nconst sheetContent = `\n    <div class=\"pills-group\">\n        <h3 class=\"icon\">\n            <i class=\"fas fa-person-running\"></i>\n            <span class=\"roboto-upper\">Jump Calculator</span>\n        </h3>\n        <ul class=\"pills\">\n            <li class=\"pill geoidesic-5e-button\">\n                <span class=\"label\" id=\"renderHighJumpButton\">High jump</span>\n            </li>\n            <li class=\"pill geoidesic-5e-button\">\n                <span class=\"label\" id=\"renderLongJumpButton\">Long jump</span>\n            </li>\n        </ul>\n    </div>\n`;\n\n\nHooks.on(\"renderActorSheet5eCharacter\", (app, html, data) => {\n    // console.log(html);\n    const lastPillGroup = html.find('.pills-group:last-of-type');\n    lastPillGroup.after(sheetContent);\n\n    const strength = app.document.system.abilities.str.value || 10;\n    const strMod = app.document.system.abilities.str.mod || 0;\n    const height = parseHeightString(app.document.system.details.height) || '6.0';\n\n    // Add event listener to the button\n    const renderHighJumpButton = html.find('#renderHighJumpButton');\n    renderHighJumpButton.on('click', () => {\n        // Render chat message\n        ChatMessage.create({\n            content: highJumpTextTemplate\n            .replace(\"{{running_jump}}\", calculateHighJump(strMod, 'running'))\n            .replace(\"{{standing_jump}}\", calculateHighJump(strMod, 'standing'))\n            .replace(\"{{5eJumpCalc.highJumpTitle}}\", game.i18n.localize('5eJumpCalc.highJumpTitle'))\n            .replace(\"{{5eJumpCalc.highJumpPost}}\", game.i18n.localize('5eJumpCalc.highJumpPost'))\n            .replace(\"{{5eJumpCalc.10FtFirst}}\", game.i18n.localize('5eJumpCalc.10FtFirst'))\n            .replace(\"{{reach}}\", calculateReach(height))\n            ,\n            speaker: ChatMessage.getSpeaker({ actor: app.actor }),\n        });\n    });\n    const renderLongJumpButton = html.find('#renderLongJumpButton');\n    renderLongJumpButton.on('click', () => {\n        // Render chat message\n        ChatMessage.create({\n            content: longJumpTextTemplate\n            .replace(\"{{running_jump}}\", calculateLongJump(strength, 'running'))\n            .replace(\"{{standing_jump}}\", calculateLongJump(strength, 'standing'))\n            .replace(\"{{5eJumpCalc.longJumpTitle}}\", game.i18n.localize('5eJumpCalc.longJumpTitle'))\n            .replace(\"{{5eJumpCalc.longJumpPost}}\", game.i18n.localize('5eJumpCalc.longJumpPost'))\n            .replace(\"{{5eJumpCalc.10FtFirst}}\", game.i18n.localize('5eJumpCalc.10FtFirst'))\n            ,\n            speaker: ChatMessage.getSpeaker({ actor: app.actor }),\n        });\n    });\n});\n"],"names":[],"mappings":"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"}